# CrossBorder1

## ※ 本プラグインを利用する場合は必ずテスト環境で動作の確認をした上で、自己責任のもと利用してください！

### ECCUBE4用多言語化プラグイン

#### version
- eccube4.0.4 ~ 4.0.5

#### 概要
ECCUBE4におけるフロントで言語切り替えを行うプラグインです。

#### 注意事項
- プラグイン開発の練習で作成したものなので、一部未実装の箇所があります。
- 多言語化するために、直接モデルを書き換えて表示する処理がありますので、意図せずモデルが書き換わる可能性があります。
- yamlファイルのアップロード、ダウンロード、削除はeccube4本体のlocale内のyamlファイルに対し実行されています。
- yamlファイルでの多言語化は、twigでyamlファイルを参照している箇所のみ反映されます。
- フォームの追加などはECCUBE4のデフォルトのtwigを想定しているため、クラス名などカスタマイズされている場合、反映されない場合があります。
- 本プラグインの利用は全て自己責任のもと利用してください。責任は一切受け付けません。

### インストール方法
1. CrossBorder/app/Plugin/CrossBorder1.tar.gz をダウンロード
1. 管理画面サイドメニュー「オーナーズストア」->「プラグイン一覧」へアクセス
1. 「ユーザー独自プラグイン」の「アップロードして新規追加」をクリック
1. 「新規プラグインのアップロード」の「ファイルを選択」へダウンロードしたtar.gzファイルをアップロードし、「アップロード」をクリック
1. アップロードされた本プラグインの再生ボタン(有効化ボタン)をクリック
1. 管理画面ヘッダーに言語切り替えプルダウンが表示されるのを確認

### 使用方法
#### □フロントでの言語切り替え
1. 本プラグイン設定画面の最下部にある、「日本語」、「英語」のリストそれぞれ、右から２番目のチェックボタンをクリックし、登録ボタンをクリック
1. フロント画面へアクセスし、ヘッダーに言語切り替えのプルダウンが表示され、選択言語に応じた言語に切り替わることを確認

#### □yamlファイルアップロード
1. 本プラグイン設定画面「messages.○○.yamlファイル」のプルダウンで、ダウンロードしたい言語ファイルを選択し、「ダウンロード」をクリック
1. ダウンロードされたファイルを任意の言語に編集し、ファイル名を設定画面の「言語コードリスト」の一覧を参考に「messages.○○.yaml」の○○の部分を変更して作成。
1. 「ファイルを選択」をクリックし、作成したyamlファイルをアップロードし、「アップロード」をクリック

#### □言語切り替えプルダウンへの言語の追加
上記yamlファイルアップロードを行ったあと、
1. 設定画面の「設定」の下の「名称」に言語名、「言語コード」にアップロードした言語ファイルの言語コードを入力し、「新規作成」をクリック
1. 追加されたリストの右から２番目のチェックを有効にし、「登録」をクリック
1. フロント画面へアクセスし、ヘッダーの言語切り替えプルダウン内に追加した名称が追加されているのを確認

#### □言語切り替えプルダウンへ表示する言語名の多言語化
1. 管理画面ヘッダー言語切り替えプルダウンから、日本語以外を選択
1. 「設定」の下の名称フォームに「言語別名称」フォームが追加されるのを確認
1. 言語切り替えで選択した言語用の名称を入力(例：プルダウン「英語」、言語別名称「English」)
1. 登録をクリック
1. フロント画面へアクセスし、言語切り替えから登録した言語がプルダウンに表示されるのを確認

#### □商品名等の多言語化
※ 実装できていない箇所があります。ご了承ください。

(商品の多言語化の場合)
1. 商品登録画面へアクセス
1. ヘッダー言語切り替えプルダウンから多言語登録したい言語を選択
1. 「言語別商品名」、「言語別商品説明」、「言語別商品説明(一覧)を追加」、「言語別フリーエリア」のフォームが追加されることを確認
1. 追加されたフォームへ、選択した言語に応じた内容を入力(例：プルダウン「英語」、商品名「りんご」、言語別商品名「Apple」)し、登録
1. フロント画面にアクセスし、言語切り替えにより入力した内容が表示されることを確認

#### その他の多言語化
それぞれの設定画面で、上記「商品名等の多言語化」と同じ操作を行ってください。
フォームが表示されない場合は、バグ、カスタマイズ等によるtwigのクラス名の不一致、もしくは未実装の箇所になります。

#### 期待する今後の展開
ECCUBEがデフォルトでこの機能がつくことを期待しています。
またはさらに高機能の多言語化プラグインが誕生することを期待しています。

#### 最後に
本プラグインは試作段階のもので不完全なものとなります。利用に再しては完全自己責任のもと利用してください。
多くのユーザ、開発者の助けに少しでもなれば幸いです。
